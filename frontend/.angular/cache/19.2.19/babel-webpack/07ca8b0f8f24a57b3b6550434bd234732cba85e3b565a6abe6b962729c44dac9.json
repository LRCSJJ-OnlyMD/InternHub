{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ChangePasswordModalComponent_div_0_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ChangePasswordModalComponent_div_0_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.close());\n    });\n    i0.ɵɵtext(1, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ChangePasswordModalComponent_div_0_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 11);\n    i0.ɵɵtext(1, \" You must change your password before continuing. This is your first login with a temporary password. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ChangePasswordModalComponent_div_0_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.errorMessage, \" \");\n  }\n}\nfunction ChangePasswordModalComponent_div_0_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.successMessage, \" \");\n  }\n}\nfunction ChangePasswordModalComponent_div_0_form_10_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function ChangePasswordModalComponent_div_0_form_10_button_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.close());\n    });\n    i0.ɵɵtext(1, \" Cancel \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.loading);\n  }\n}\nfunction ChangePasswordModalComponent_div_0_form_10_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Change Password\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ChangePasswordModalComponent_div_0_form_10_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Changing...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ChangePasswordModalComponent_div_0_form_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 14);\n    i0.ɵɵlistener(\"ngSubmit\", function ChangePasswordModalComponent_div_0_form_10_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.changePassword());\n    });\n    i0.ɵɵelementStart(1, \"div\", 15)(2, \"label\", 16);\n    i0.ɵɵtext(3, \"Current Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 17);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ChangePasswordModalComponent_div_0_form_10_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.currentPassword, $event) || (ctx_r1.currentPassword = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 15)(6, \"label\", 18);\n    i0.ɵɵtext(7, \"New Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 19);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ChangePasswordModalComponent_div_0_form_10_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.newPassword, $event) || (ctx_r1.newPassword = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 15)(10, \"label\", 20);\n    i0.ɵɵtext(11, \"Confirm New Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 21);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ChangePasswordModalComponent_div_0_form_10_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.confirmPassword, $event) || (ctx_r1.confirmPassword = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 22);\n    i0.ɵɵtemplate(14, ChangePasswordModalComponent_div_0_form_10_button_14_Template, 2, 1, \"button\", 23);\n    i0.ɵɵelementStart(15, \"button\", 24);\n    i0.ɵɵtemplate(16, ChangePasswordModalComponent_div_0_form_10_span_16_Template, 2, 0, \"span\", 25)(17, ChangePasswordModalComponent_div_0_form_10_span_17_Template, 2, 0, \"span\", 25);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.currentPassword);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.loading);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.newPassword);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.loading);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.confirmPassword);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.loading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.mandatory);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r1.loading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loading);\n  }\n}\nfunction ChangePasswordModalComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵlistener(\"click\", function ChangePasswordModalComponent_div_0_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.close());\n    });\n    i0.ɵɵelementStart(1, \"div\", 2);\n    i0.ɵɵlistener(\"click\", function ChangePasswordModalComponent_div_0_Template_div_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      return i0.ɵɵresetView($event.stopPropagation());\n    });\n    i0.ɵɵelementStart(2, \"div\", 3)(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, ChangePasswordModalComponent_div_0_button_5_Template, 2, 0, \"button\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 5);\n    i0.ɵɵtemplate(7, ChangePasswordModalComponent_div_0_p_7_Template, 2, 0, \"p\", 6)(8, ChangePasswordModalComponent_div_0_div_8_Template, 2, 1, \"div\", 7)(9, ChangePasswordModalComponent_div_0_div_9_Template, 2, 1, \"div\", 8)(10, ChangePasswordModalComponent_div_0_form_10_Template, 18, 10, \"form\", 9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.mandatory ? \"Change Your Password\" : \"Change Password\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.mandatory);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.mandatory);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.errorMessage);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.successMessage);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.successMessage);\n  }\n}\nexport let ChangePasswordModalComponent = /*#__PURE__*/(() => {\n  class ChangePasswordModalComponent {\n    constructor(authService) {\n      this.authService = authService;\n      this.isOpen = false;\n      this.mandatory = false;\n      this.closed = new EventEmitter();\n      this.currentPassword = '';\n      this.newPassword = '';\n      this.confirmPassword = '';\n      this.errorMessage = '';\n      this.successMessage = '';\n      this.loading = false;\n    }\n    changePassword() {\n      this.errorMessage = '';\n      this.successMessage = '';\n      if (!this.currentPassword || !this.newPassword || !this.confirmPassword) {\n        this.errorMessage = 'Please fill in all fields';\n        return;\n      }\n      if (this.newPassword.length < 8) {\n        this.errorMessage = 'New password must be at least 8 characters long';\n        return;\n      }\n      if (this.newPassword !== this.confirmPassword) {\n        this.errorMessage = 'New passwords do not match';\n        return;\n      }\n      this.loading = true;\n      this.authService.changePassword({\n        currentPassword: this.currentPassword,\n        newPassword: this.newPassword\n      }).subscribe({\n        next: response => {\n          this.successMessage = response.message;\n          this.loading = false;\n          setTimeout(() => {\n            this.close(true);\n          }, 2000);\n        },\n        error: error => {\n          this.loading = false;\n          this.errorMessage = error.error?.message || 'Failed to change password. Please try again.';\n        }\n      });\n    }\n    close(success = false) {\n      if (this.mandatory && !success) {\n        this.errorMessage = 'You must change your password to continue';\n        return;\n      }\n      this.currentPassword = '';\n      this.newPassword = '';\n      this.confirmPassword = '';\n      this.errorMessage = '';\n      this.successMessage = '';\n      this.closed.emit(success);\n    }\n    static {\n      this.ɵfac = function ChangePasswordModalComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ChangePasswordModalComponent)(i0.ɵɵdirectiveInject(i1.AuthService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ChangePasswordModalComponent,\n        selectors: [[\"app-change-password-modal\"]],\n        inputs: {\n          isOpen: \"isOpen\",\n          mandatory: \"mandatory\"\n        },\n        outputs: {\n          closed: \"closed\"\n        },\n        decls: 1,\n        vars: 1,\n        consts: [[\"class\", \"modal-overlay\", 3, \"click\", 4, \"ngIf\"], [1, \"modal-overlay\", 3, \"click\"], [1, \"modal-content\", 3, \"click\"], [1, \"modal-header\"], [\"class\", \"close-btn\", 3, \"click\", 4, \"ngIf\"], [1, \"modal-body\"], [\"class\", \"warning-text\", 4, \"ngIf\"], [\"class\", \"alert alert-error\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [3, \"ngSubmit\", 4, \"ngIf\"], [1, \"close-btn\", 3, \"click\"], [1, \"warning-text\"], [1, \"alert\", \"alert-error\"], [1, \"alert\", \"alert-success\"], [3, \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"currentPassword\"], [\"type\", \"password\", \"id\", \"currentPassword\", \"name\", \"currentPassword\", \"placeholder\", \"Enter current password\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [\"for\", \"newPassword\"], [\"type\", \"password\", \"id\", \"newPassword\", \"name\", \"newPassword\", \"placeholder\", \"Enter new password (min 8 characters)\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [\"for\", \"confirmPassword\"], [\"type\", \"password\", \"id\", \"confirmPassword\", \"name\", \"confirmPassword\", \"placeholder\", \"Confirm new password\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [1, \"modal-footer\"], [\"type\", \"button\", \"class\", \"btn-secondary\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn-primary\", 3, \"disabled\"], [4, \"ngIf\"], [\"type\", \"button\", 1, \"btn-secondary\", 3, \"click\", \"disabled\"]],\n        template: function ChangePasswordModalComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, ChangePasswordModalComponent_div_0_Template, 11, 6, \"div\", 0);\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"ngIf\", ctx.isOpen);\n          }\n        },\n        dependencies: [CommonModule, i2.NgIf, FormsModule, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n        styles: [\".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;max-width:500px;width:90%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 24px 16px;border-bottom:1px solid var(--border-color)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;color:var(--text-primary)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:32px;color:var(--text-secondary);cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;transition:color .3s}.close-btn[_ngcontent-%COMP%]:hover{color:var(--text-primary)}.modal-body[_ngcontent-%COMP%]{padding:24px}.warning-text[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;padding:12px;border-radius:8px;margin-bottom:16px;font-size:14px;border:1px solid #ffeaa7}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-primary);font-weight:500;margin-bottom:8px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid var(--border-color);border-radius:8px;font-size:14px;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:var(--background-secondary);cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:20px;font-size:14px}.alert-error[_ngcontent-%COMP%]{background-color:#fee;color:#c33;border:1px solid #fcc}.alert-success[_ngcontent-%COMP%]{background-color:#efe;color:#3c3;border:1px solid #cfc}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:24px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary-dark)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--background-secondary);color:var(--text-primary)}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#d1d5db}.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}\"]\n      });\n    }\n  }\n  return ChangePasswordModalComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}