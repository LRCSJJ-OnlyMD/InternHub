{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/notification.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"dropdownMenu\"];\nfunction NotificationBellComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"span\", 8);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.…µ…µnextContext();\n    i0.…µ…µadvance();\n    i0.…µ…µtextInterpolate(ctx_r0.unreadCount > 99 ? \"99+\" : ctx_r0.unreadCount);\n  }\n}\nfunction NotificationBellComponent_div_6_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"button\", 14);\n    i0.…µ…µlistener(\"click\", function NotificationBellComponent_div_6_button_5_Template_button_click_0_listener($event) {\n      i0.…µ…µrestoreView(_r2);\n      const ctx_r0 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r0.markAllAsRead($event));\n    });\n    i0.…µ…µtext(1, \" Mark all read \");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction NotificationBellComponent_div_6_div_6_div_1_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelement(0, \"div\", 29);\n  }\n}\nfunction NotificationBellComponent_div_6_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 18);\n    i0.…µ…µlistener(\"click\", function NotificationBellComponent_div_6_div_6_div_1_Template_div_click_0_listener($event) {\n      const notification_r4 = i0.…µ…µrestoreView(_r3).$implicit;\n      const ctx_r0 = i0.…µ…µnextContext(3);\n      return i0.…µ…µresetView(ctx_r0.markAsRead(notification_r4, $event));\n    });\n    i0.…µ…µelementStart(1, \"div\", 19);\n    i0.…µ…µtext(2);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"div\", 20)(4, \"div\", 21);\n    i0.…µ…µtext(5);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(6, \"div\", 22);\n    i0.…µ…µtext(7);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(8, \"div\", 23);\n    i0.…µ…µtext(9);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(10, \"button\", 24);\n    i0.…µ…µlistener(\"click\", function NotificationBellComponent_div_6_div_6_div_1_Template_button_click_10_listener($event) {\n      const notification_r4 = i0.…µ…µrestoreView(_r3).$implicit;\n      const ctx_r0 = i0.…µ…µnextContext(3);\n      return i0.…µ…µresetView(ctx_r0.deleteNotification(notification_r4.id, $event));\n    });\n    i0.…µ…µnamespaceSVG();\n    i0.…µ…µelementStart(11, \"svg\", 25);\n    i0.…µ…µelement(12, \"line\", 26)(13, \"line\", 27);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µtemplate(14, NotificationBellComponent_div_6_div_6_div_1_div_14_Template, 1, 0, \"div\", 28);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const notification_r4 = ctx.$implicit;\n    const ctx_r0 = i0.…µ…µnextContext(3);\n    i0.…µ…µclassProp(\"unread\", !notification_r4.read);\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(ctx_r0.getNotificationIcon(notification_r4.type));\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate(notification_r4.title);\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(notification_r4.message);\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(ctx_r0.getRelativeTime(notification_r4.createdAt));\n    i0.…µ…µadvance(5);\n    i0.…µ…µproperty(\"ngIf\", !notification_r4.read);\n  }\n}\nfunction NotificationBellComponent_div_6_div_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 30);\n    i0.…µ…µnamespaceSVG();\n    i0.…µ…µelementStart(1, \"svg\", 31);\n    i0.…µ…µelement(2, \"path\", 4)(3, \"path\", 5);\n    i0.…µ…µelementEnd();\n    i0.…µ…µnamespaceHTML();\n    i0.…µ…µelementStart(4, \"p\");\n    i0.…µ…µtext(5, \"No notifications yet\");\n    i0.…µ…µelementEnd()();\n  }\n}\nfunction NotificationBellComponent_div_6_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 15);\n    i0.…µ…µtemplate(1, NotificationBellComponent_div_6_div_6_div_1_Template, 15, 7, \"div\", 16)(2, NotificationBellComponent_div_6_div_6_div_2_Template, 6, 0, \"div\", 17);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.…µ…µnextContext(2);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngForOf\", ctx_r0.notifications);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", ctx_r0.notifications.length === 0);\n  }\n}\nfunction NotificationBellComponent_div_6_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 32);\n    i0.…µ…µelement(1, \"div\", 33);\n    i0.…µ…µelementStart(2, \"p\");\n    i0.…µ…µtext(3, \"Loading notifications...\");\n    i0.…µ…µelementEnd()();\n  }\n}\nfunction NotificationBellComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 9, 0)(2, \"div\", 10)(3, \"h3\");\n    i0.…µ…µtext(4, \"Notifications\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtemplate(5, NotificationBellComponent_div_6_button_5_Template, 2, 0, \"button\", 11);\n    i0.…µ…µelementEnd();\n    i0.…µ…µtemplate(6, NotificationBellComponent_div_6_div_6_Template, 3, 2, \"div\", 12)(7, NotificationBellComponent_div_6_div_7_Template, 4, 0, \"div\", 13);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(5);\n    i0.…µ…µproperty(\"ngIf\", ctx_r0.unreadCount > 0);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", !ctx_r0.isLoading);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", ctx_r0.isLoading);\n  }\n}\nexport let NotificationBellComponent = /*#__PURE__*/(() => {\n  class NotificationBellComponent {\n    constructor(notificationService, router, elementRef) {\n      this.notificationService = notificationService;\n      this.router = router;\n      this.elementRef = elementRef;\n      this.unreadCount = 0;\n      this.notifications = [];\n      this.showDropdown = false;\n      this.isLoading = false;\n      this.subscription = new Subscription();\n    }\n    ngOnInit() {\n      this.subscription.add(this.notificationService.unreadCount$.subscribe(count => {\n        this.unreadCount = count;\n      }));\n      this.notificationService.refreshUnreadCount();\n    }\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n    }\n    toggleDropdown() {\n      this.showDropdown = !this.showDropdown;\n      if (this.showDropdown) {\n        this.loadNotifications();\n      }\n    }\n    loadNotifications() {\n      this.isLoading = true;\n      this.notificationService.getNotifications(0, 10).subscribe({\n        next: response => {\n          this.notifications = response.content || response;\n          this.isLoading = false;\n        },\n        error: error => {\n          console.error('Error loading notifications:', error);\n          this.isLoading = false;\n        }\n      });\n    }\n    markAsRead(notification, event) {\n      event.stopPropagation();\n      if (!notification.read) {\n        this.notificationService.markAsRead(notification.id).subscribe({\n          next: () => {\n            notification.read = true;\n            this.handleNotificationClick(notification);\n          },\n          error: error => {\n            console.error('Error marking notification as read:', error);\n          }\n        });\n      } else {\n        this.handleNotificationClick(notification);\n      }\n    }\n    markAllAsRead(event) {\n      event.stopPropagation();\n      this.notificationService.markAllAsRead().subscribe({\n        next: () => {\n          this.notifications.forEach(n => n.read = true);\n        },\n        error: error => {\n          console.error('Error marking all as read:', error);\n        }\n      });\n    }\n    deleteNotification(notificationId, event) {\n      event.stopPropagation();\n      this.notificationService.deleteNotification(notificationId).subscribe({\n        next: () => {\n          this.notifications = this.notifications.filter(n => n.id !== notificationId);\n          this.notificationService.refreshUnreadCount();\n        },\n        error: error => {\n          console.error('Error deleting notification:', error);\n        }\n      });\n    }\n    handleNotificationClick(notification) {\n      this.showDropdown = false;\n      // Navigate based on notification entity type\n      if (notification.entityType === 'INTERNSHIP' && notification.entityId) {\n        this.router.navigate(['/internships', notification.entityId]);\n      }\n    }\n    getNotificationIcon(type) {\n      const icons = {\n        'INFO': 'üì¢',\n        'SUCCESS': '‚úÖ',\n        'WARNING': '‚ö†Ô∏è',\n        'ERROR': '‚ùå',\n        'INTERNSHIP_SUBMITTED': 'üìù',\n        'INTERNSHIP_CLAIMED': 'üéØ',\n        'INTERNSHIP_VALIDATED': '‚úÖ',\n        'INTERNSHIP_REFUSED': '‚ùå',\n        'COMMENT_ADDED': 'üí¨'\n      };\n      return icons[type] || 'üì¢';\n    }\n    getRelativeTime(dateString) {\n      const date = new Date(dateString);\n      const now = new Date();\n      const diffMs = now.getTime() - date.getTime();\n      const diffMins = Math.floor(diffMs / 60000);\n      const diffHours = Math.floor(diffMs / 3600000);\n      const diffDays = Math.floor(diffMs / 86400000);\n      if (diffMins < 1) return 'Just now';\n      if (diffMins < 60) return `${diffMins}m ago`;\n      if (diffHours < 24) return `${diffHours}h ago`;\n      if (diffDays < 7) return `${diffDays}d ago`;\n      return date.toLocaleDateString();\n    }\n    onDocumentClick(event) {\n      if (!this.elementRef.nativeElement.contains(event.target)) {\n        this.showDropdown = false;\n      }\n    }\n    static {\n      this.…µfac = function NotificationBellComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || NotificationBellComponent)(i0.…µ…µdirectiveInject(i1.NotificationService), i0.…µ…µdirectiveInject(i2.Router), i0.…µ…µdirectiveInject(i0.ElementRef));\n      };\n    }\n    static {\n      this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n        type: NotificationBellComponent,\n        selectors: [[\"app-notification-bell\"]],\n        viewQuery: function NotificationBellComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.…µ…µviewQuery(_c0, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.…µ…µqueryRefresh(_t = i0.…µ…µloadQuery()) && (ctx.dropdownMenu = _t.first);\n          }\n        },\n        hostBindings: function NotificationBellComponent_HostBindings(rf, ctx) {\n          if (rf & 1) {\n            i0.…µ…µlistener(\"click\", function NotificationBellComponent_click_HostBindingHandler($event) {\n              return ctx.onDocumentClick($event);\n            }, false, i0.…µ…µresolveDocument);\n          }\n        },\n        decls: 7,\n        vars: 4,\n        consts: [[\"dropdownMenu\", \"\"], [1, \"notification-bell-container\"], [\"aria-label\", \"Notifications\", 1, \"bell-button\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"24\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"d\", \"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"], [\"d\", \"M13.73 21a2 2 0 0 1-3.46 0\"], [\"class\", \"badge\", 4, \"ngIf\"], [\"class\", \"dropdown-menu\", 4, \"ngIf\"], [1, \"badge\"], [1, \"dropdown-menu\"], [1, \"dropdown-header\"], [\"class\", \"mark-all-read-btn\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"notifications-list\", 4, \"ngIf\"], [\"class\", \"loading-state\", 4, \"ngIf\"], [1, \"mark-all-read-btn\", 3, \"click\"], [1, \"notifications-list\"], [\"class\", \"notification-item\", 3, \"unread\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [1, \"notification-item\", 3, \"click\"], [1, \"notification-icon\"], [1, \"notification-content\"], [1, \"notification-title\"], [1, \"notification-message\"], [1, \"notification-time\"], [\"aria-label\", \"Delete notification\", 1, \"delete-btn\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [\"x1\", \"18\", \"y1\", \"6\", \"x2\", \"6\", \"y2\", \"18\"], [\"x1\", \"6\", \"y1\", \"6\", \"x2\", \"18\", \"y2\", \"18\"], [\"class\", \"unread-dot\", 4, \"ngIf\"], [1, \"unread-dot\"], [1, \"empty-state\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"48\", \"height\", \"48\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"1.5\"], [1, \"loading-state\"], [1, \"spinner\"]],\n        template: function NotificationBellComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.…µ…µelementStart(0, \"div\", 1)(1, \"button\", 2);\n            i0.…µ…µlistener(\"click\", function NotificationBellComponent_Template_button_click_1_listener() {\n              return ctx.toggleDropdown();\n            });\n            i0.…µ…µnamespaceSVG();\n            i0.…µ…µelementStart(2, \"svg\", 3);\n            i0.…µ…µelement(3, \"path\", 4)(4, \"path\", 5);\n            i0.…µ…µelementEnd();\n            i0.…µ…µtemplate(5, NotificationBellComponent_span_5_Template, 2, 1, \"span\", 6);\n            i0.…µ…µelementEnd();\n            i0.…µ…µtemplate(6, NotificationBellComponent_div_6_Template, 8, 3, \"div\", 7);\n            i0.…µ…µelementEnd();\n          }\n          if (rf & 2) {\n            i0.…µ…µadvance();\n            i0.…µ…µclassProp(\"has-unread\", ctx.unreadCount > 0);\n            i0.…µ…µadvance(4);\n            i0.…µ…µproperty(\"ngIf\", ctx.unreadCount > 0);\n            i0.…µ…µadvance();\n            i0.…µ…µproperty(\"ngIf\", ctx.showDropdown);\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf],\n        styles: [\".notification-bell-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.bell-button[_ngcontent-%COMP%]{position:relative;background:transparent;border:none;cursor:pointer;padding:8px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease}.bell-button[_ngcontent-%COMP%]:hover{background:#0000000d}.bell-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#333}.bell-button.has-unread[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_ring 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_ring{0%,to{transform:rotate(0)}10%,30%{transform:rotate(-10deg)}20%,40%{transform:rotate(10deg)}}.badge[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background:#f44;color:#fff;font-size:10px;font-weight:700;padding:2px 5px;border-radius:10px;min-width:18px;text-align:center}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 8px);right:0;width:380px;max-height:500px;background:#fff;border-radius:8px;box-shadow:0 4px 20px #00000026;z-index:1000;overflow:hidden;display:flex;flex-direction:column}.dropdown-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #e0e0e0}.dropdown-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.mark-all-read-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#007bff;font-size:14px;cursor:pointer;padding:4px 8px;border-radius:4px;transition:background .2s}.mark-all-read-btn[_ngcontent-%COMP%]:hover{background:#007bff1a}.notifications-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:400px}.notification-item[_ngcontent-%COMP%]{position:relative;display:flex;align-items:flex-start;gap:12px;padding:16px;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:background .2s}.notification-item[_ngcontent-%COMP%]:hover{background:#f8f9fa}.notification-item.unread[_ngcontent-%COMP%]{background:#f0f7ff}.notification-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.notification-content[_ngcontent-%COMP%]{flex:1;min-width:0}.notification-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333;margin-bottom:4px}.notification-message[_ngcontent-%COMP%]{font-size:13px;color:#666;line-height:1.4;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.notification-time[_ngcontent-%COMP%]{font-size:12px;color:#999;margin-top:4px}.delete-btn[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;padding:4px;opacity:0;transition:opacity .2s;flex-shrink:0}.notification-item[_ngcontent-%COMP%]:hover   .delete-btn[_ngcontent-%COMP%]{opacity:1}.delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{stroke:#f44}.unread-dot[_ngcontent-%COMP%]{position:absolute;top:20px;left:8px;width:8px;height:8px;background:#007bff;border-radius:50%}.empty-state[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid #f0f0f0;border-top:3px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.notifications-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.notifications-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.notifications-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.notifications-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a1a1a1}\"]\n      });\n    }\n  }\n  return NotificationBellComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}