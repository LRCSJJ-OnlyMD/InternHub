{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\n/**\n * Service for internship operations.\n * Provides methods for student, instructor, and admin internship management.\n */\nexport let InternshipService = /*#__PURE__*/(() => {\n  class InternshipService {\n    constructor(http) {\n      this.http = http;\n      this.apiUrl = environment.apiUrl;\n    }\n    // Student operations\n    createInternship(request) {\n      return this.http.post(`${this.apiUrl}/student/internships`, request);\n    }\n    updateInternship(id, request) {\n      return this.http.put(`${this.apiUrl}/student/internships/${id}`, request);\n    }\n    submitInternship(id) {\n      return this.http.post(`${this.apiUrl}/student/internships/${id}/submit`, {});\n    }\n    getMyInternships() {\n      return this.http.get(`${this.apiUrl}/student/internships`);\n    }\n    uploadReport(internshipId, file) {\n      const formData = new FormData();\n      formData.append('file', file);\n      return this.http.post(`${this.apiUrl}/student/internships/${internshipId}/report`, formData);\n    }\n    downloadReport(internshipId) {\n      return this.http.get(`${this.apiUrl}/student/internships/${internshipId}/report`, {\n        responseType: 'blob'\n      });\n    }\n    viewReport(internshipId) {\n      return this.http.get(`${this.apiUrl}/student/internships/${internshipId}/report?inline=true`, {\n        responseType: 'blob'\n      });\n    }\n    // Instructor operations\n    getPendingInternships() {\n      return this.http.get(`${this.apiUrl}/instructor/internships/pending`);\n    }\n    getAvailableInternships() {\n      return this.http.get(`${this.apiUrl}/instructor/internships/available`);\n    }\n    claimInternship(id) {\n      return this.http.post(`${this.apiUrl}/instructor/internships/${id}/claim`, {});\n    }\n    validateInternship(id) {\n      return this.http.post(`${this.apiUrl}/instructor/internships/${id}/validate`, {});\n    }\n    refuseInternship(id, request) {\n      return this.http.post(`${this.apiUrl}/instructor/internships/${id}/refuse`, request);\n    }\n    downloadReportAsInstructor(internshipId) {\n      return this.http.get(`${this.apiUrl}/instructor/internships/${internshipId}/report`, {\n        responseType: 'blob'\n      });\n    }\n    getMyValidatedInternships() {\n      // Get validated internships where I am the instructor\n      return this.http.get(`${this.apiUrl}/instructor/internships/validated`);\n    }\n    // Admin operations\n    getAllInternships() {\n      return this.http.get(`${this.apiUrl}/admin/internships`);\n    }\n    getInternshipById(id) {\n      return this.http.get(`${this.apiUrl}/admin/internships/${id}`);\n    }\n    deleteInternship(id) {\n      return this.http.delete(`${this.apiUrl}/admin/internships/${id}`);\n    }\n    reassignInstructor(internshipId, instructorId) {\n      return this.http.put(`${this.apiUrl}/admin/internships/${internshipId}/reassign/${instructorId}`, {});\n    }\n    // Search operations\n    searchInternships(filters) {\n      let params = new HttpParams();\n      if (filters.sectorId) params = params.set('sectorId', filters.sectorId.toString());\n      if (filters.status) params = params.set('status', filters.status);\n      if (filters.companyName) params = params.set('companyName', filters.companyName);\n      if (filters.studentId) params = params.set('studentId', filters.studentId.toString());\n      if (filters.instructorId) params = params.set('instructorId', filters.instructorId.toString());\n      return this.http.get(`${this.apiUrl}/admin/internships/search`, {\n        params\n      });\n    }\n    // Export operations\n    exportToCSV(internships) {\n      const headers = ['ID', 'Title', 'Student', 'Company', 'Sector', 'Status', 'Start Date', 'End Date', 'Has Report'];\n      const rows = internships.map(i => [i.id, i.title, i.studentName, i.companyName, i.sectorName, i.status, i.startDate, i.endDate, i.hasReport ? 'Yes' : 'No']);\n      const csvContent = [headers.join(','), ...rows.map(row => row.map(cell => `\"${cell}\"`).join(','))].join('\\n');\n      const blob = new Blob([csvContent], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      const link = document.createElement('a');\n      const url = URL.createObjectURL(blob);\n      link.setAttribute('href', url);\n      link.setAttribute('download', `internships_export_${new Date().toISOString().split('T')[0]}.csv`);\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n    exportToExcel(internships) {\n      // Simple Excel-compatible format (HTML table)\n      const headers = ['ID', 'Title', 'Student', 'Company', 'Sector', 'Status', 'Start Date', 'End Date', 'Has Report'];\n      const rows = internships.map(i => [i.id, i.title, i.studentName, i.companyName, i.sectorName, i.status, i.startDate, i.endDate, i.hasReport ? 'Yes' : 'No']);\n      let excelContent = '<html xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:excel\" xmlns=\"http://www.w3.org/TR/REC-html40\"><head><meta charset=\"utf-8\"/></head><body><table>';\n      excelContent += '<tr>' + headers.map(h => `<th>${h}</th>`).join('') + '</tr>';\n      rows.forEach(row => {\n        excelContent += '<tr>' + row.map(cell => `<td>${cell}</td>`).join('') + '</tr>';\n      });\n      excelContent += '</table></body></html>';\n      const blob = new Blob([excelContent], {\n        type: 'application/vnd.ms-excel'\n      });\n      const link = document.createElement('a');\n      const url = URL.createObjectURL(blob);\n      link.setAttribute('href', url);\n      link.setAttribute('download', `internships_export_${new Date().toISOString().split('T')[0]}.xls`);\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n    static {\n      this.ɵfac = function InternshipService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || InternshipService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: InternshipService,\n        factory: InternshipService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return InternshipService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}